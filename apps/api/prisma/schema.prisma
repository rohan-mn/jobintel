generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

enum WorkMode {
  REMOTE
  ONSITE
  HYBRID
  UNKNOWN
}

enum ExperienceLevel {
  INTERN
  JUNIOR
  MID
  SENIOR
  LEAD
  UNKNOWN
}

enum RoleCategory {
  BACKEND
  FRONTEND
  FULLSTACK
  DATA
  ML
  DEVOPS
  SECURITY
  MOBILE
  QA
  PM
  OTHER
}

model JobPost {
  id          String   @id @default(cuid())
  source      String
  sourceJobId String?
  title       String
  company     String?
  location    String?
  url         String
  postedAt    DateTime?
  createdAt   DateTime @default(now())

  // ✅ new fields
  workMode        WorkMode        @default(UNKNOWN)
  experienceLevel ExperienceLevel @default(UNKNOWN)
  roleCategory    RoleCategory    @default(OTHER)

  @@unique([source, url])

  // ✅ indexes (helps filtering + sorting)
  @@index([createdAt])
  @@index([company])
  @@index([location])
  @@index([workMode])
  @@index([experienceLevel])
  @@index([roleCategory])
  @@index([createdAt, roleCategory])
}
